const nodemailer = require('nodemailer');\n\nconst getTransporter = async () => {\n  if (process.env.NODE_ENV === 'production') {\n    return nodemailer.createTransport({\n      host: process.env.SMTP_HOST,\n      port: process.env.SMTP_PORT,\n      auth: {\n        user: process.env.SMTP_USER,\n        pass: process.env.SMTP_PASS\n      }\n    });\n  }\n\n  const testAccount = await nodemailer.createTestAccount();\n  return nodemailer.createTransport({\n    host: 'smtp.ethereal.email',\n    port: 587,\n    auth: {\n      user: testAccount.user,\n      pass: testAccount.pass\n    }\n  });\n};\n\nconst sendMail = async ({ to, subject, text, html }) => {\n  const transporter = await getTransporter();\n  const info = await transporter.sendMail({\n    from: process.env.EMAIL_FROM || '"No Reply" <no-reply@example.com>',\n    to,\n    subject,\n    text,\n    html\n  });\n  if (nodemailer.getTestMessageUrl && info) {\n    console.log('Preview URL: %s', nodemailer.getTestMessageUrl(info));\n  }\n  return info;\n};\n\nmodule.exports = { sendMail };
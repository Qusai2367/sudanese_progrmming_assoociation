const mongoose = require('mongoose');\nconst bcrypt = require('bcryptjs');\n\nconst userSchema = new mongoose.Schema({\n  name: { type: String, required: true },\n  email: { type: String, required: true, unique: true, lowercase: true },\n  password: { type: String, required: true },\n  role: { type: String, enum: ['admin','provider','client'], default: 'client' },\n  avatar: String,\n  createdAt: { type: Date, default: Date.now },\n  resetPasswordToken: String,\n  resetPasswordExpires: Date,\n}, { timestamps: true });\n\nuserSchema.pre('save', async function(next) {\n  if (!this.isModified('password')) return next();\n  const salt = await bcrypt.genSalt(10);\n  this.password = await bcrypt.hash(this.password, salt);\n  next();\n});\n\nuserSchema.methods.comparePassword = function(password) {\n  return bcrypt.compare(password, this.password);\n};\n\nmodule.exports = mongoose.model('User', userSchema);
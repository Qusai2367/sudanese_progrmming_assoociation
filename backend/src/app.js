const express = require('express');\nconst cors = require('cors');\nconst morgan = require('morgan');\nconst path = require('path');\nconst errorHandler = require('./middleware/errorHandler');\nconst authRoutes = require('./routes/auth');\nconst postRoutes = require('./routes/posts');\nconst commentRoutes = require('./routes/comments');\nconst providerRoutes = require('./routes/providers');\nconst requestRoutes = require('./routes/requests');\nconst contactRoutes = require('./routes/contact');\nconst uploadRoutes = require('./routes/uploads');\nconst contentRoutes = require('./routes/content');\n\nconst app = express();\n\napp.use(cors());\napp.use(express.json({ limit: '10mb' }));\napp.use(express.urlencoded({ extended: true }));\napp.use(morgan('dev'));\n\n// Routes\napp.use('/api/auth', authRoutes);\napp.use('/api/posts', postRoutes);\napp.use('/api/posts/:postId/comments', commentRoutes);\napp.use('/api/comments', commentRoutes);\napp.use('/api/providers', providerRoutes);\napp.use('/api/requests', requestRoutes);\napp.use('/api/contact', contactRoutes);\napp.use('/api/uploads', uploadRoutes);\napp.use('/api', contentRoutes);\n\n// Serve frontend if built\nconst frontendBuildPath = path.join(__dirname, '..', '..', 'frontend', 'build');\napp.use(express.static(frontendBuildPath));\napp.get('*', (req, res) => {\n  res.sendFile(path.join(frontendBuildPath, 'index.html'));\n});\n\n// Error handler\napp.use(errorHandler);\n\nmodule.exports = app;